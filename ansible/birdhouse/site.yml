---
# This playbook deploys the whole birdhouse application stack on this site. 

- name: apply common configuration to all nodes
  hosts: all
  become: yes
  become_user: root
  roles:
    - common

- name: configure and deploy WPS servers
  hosts: wpsservers
  become: yes
  become_user: root
  roles:
    - { role: wpsserver, service: 'flyingpigeon',  http_port: 8091 } 
    - { role: wpsserver, service: 'hummingbird',  http_port: 8092 } 
    - { role: wpsserver, service: 'flyingpigeon',  http_port: 8093 } 
    - { role: wpsserver, service: 'emu',  http_port: 8094 }
    

#- name: configure and deploy phoenix web server
#  hosts: webservers
#  become: yes
#  become_user: root
#  roles:
#     - phoenix
